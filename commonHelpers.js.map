{"version":3,"file":"commonHelpers.js","sources":["../src/js/1-timer.js"],"sourcesContent":["/*-------  Підключаю бібліотеку FlatPick  -------*/\nimport flatpickr from 'flatpickr';\nimport 'flatpickr/dist/flatpickr.min.css';\n\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\n/*-------  Достаю елементи  -------*/\n\nconst dateTime = document.querySelector('input#datetime-picker');\nconst startBtn = document.querySelector('button[data-start]');\nconst dataDays = document.querySelector('[data-days]');\nconst dataHours = document.querySelector('[data-hours]');\nconst dataMinutes = document.querySelector('[data-minutes]');\nconst dataSeconds = document.querySelector('[data-seconds]');\n\n/*------- Логіка -------*/\n\n\nstartBtn.disabled = true;\n\nlet userSelectedDate;\nlet countdownInterval;\n\nflatpickr(dateTime, {\n  enableTime: true,\n  time_24hr: true,\n  defaultDate: new Date(),\n  minuteIncrement: 1,\n    onClose([selectedDates]) {\n    if (selectedDates.getTime() < Date.now()) {\n      iziToast.error({\n        message: 'Please choose a date in the future',\n      });\n    } else {\n      startBtn.disabled = false;\n      userSelectedDate = selectedDates.getTime();\n    }\n  },\n});\n\nfunction timerStart() {\n  countdownInterval = setInterval(() => {\n      const startTime = userSelectedDate;\n      const currentTime = Date.now();\n      const diff = startTime - currentTime;\n\n      if (diff <= 0) {\n            startBtn.disabled = true;\n          clearInterval(countdownInterval);\n          convertMs(0);\n      } else {\n          \n          startBtn.disabled = false;\n          const time = convertMs(diff);\n\n    updateClockFace(time);\n      }\n  }, 1000);\n}\n\nfunction convertMs(ms) {\n  // Number of milliseconds per unit of time\n  const second = 1000;\n  const minute = second * 60;\n  const hour = minute * 60;\n  const day = hour * 24;\n\n  // Remaining days\n  const days = pad(Math.floor(ms / day));\n  // Remaining hours\n  const hours = pad(Math.floor((ms % day) / hour));\n  // Remaining minutes\n  const minutes = pad(Math.floor(((ms % day) % hour) / minute));\n  // Remaining seconds\n  const seconds = pad(Math.floor((((ms % day) % hour) % minute) / second));\n\n  return { days, hours, minutes, seconds };\n}\n\nconsole.log(convertMs(2000)); // {days: 0, hours: 0, minutes: 0, seconds: 2}\nconsole.log(convertMs(140000)); // {days: 0, hours: 0, minutes: 2, seconds: 20}\nconsole.log(convertMs(24140000)); // {days: 0, hours: 6 minutes: 42, seconds: 20}\n\nfunction pad(value) {\n  return String(value).padStart(2, '0');\n}\n\nfunction updateClockFace({ days, hours, minutes, seconds }) {\ndataDays.textContent = days;\n  dataHours.textContent=hours;\n  dataMinutes.textContent=minutes;\n  dataSeconds.textContent=seconds;\n}\n\nstartBtn.addEventListener('click', () => {\n    if (userSelectedDate) {\n        timerStart();\n    }\n})"],"names":["dateTime","startBtn","dataDays","dataHours","dataMinutes","dataSeconds","userSelectedDate","countdownInterval","flatpickr","selectedDates","iziToast","timerStart","startTime","currentTime","diff","convertMs","time","updateClockFace","ms","days","pad","hours","minutes","seconds","value"],"mappings":"0IASA,MAAMA,EAAW,SAAS,cAAc,uBAAuB,EACzDC,EAAW,SAAS,cAAc,oBAAoB,EACtDC,EAAW,SAAS,cAAc,aAAa,EAC/CC,EAAY,SAAS,cAAc,cAAc,EACjDC,EAAc,SAAS,cAAc,gBAAgB,EACrDC,EAAc,SAAS,cAAc,gBAAgB,EAK3DJ,EAAS,SAAW,GAEpB,IAAIK,EACAC,EAEJC,EAAUR,EAAU,CAClB,WAAY,GACZ,UAAW,GACX,YAAa,IAAI,KACjB,gBAAiB,EACf,QAAQ,CAACS,CAAa,EAAG,CACrBA,EAAc,QAAO,EAAK,KAAK,IAAG,EACpCC,EAAS,MAAM,CACb,QAAS,oCACjB,CAAO,GAEDT,EAAS,SAAW,GACpBK,EAAmBG,EAAc,UAEpC,CACH,CAAC,EAED,SAASE,GAAa,CACpBJ,EAAoB,YAAY,IAAM,CAClC,MAAMK,EAAYN,EACZO,EAAc,KAAK,MACnBC,EAAOF,EAAYC,EAEzB,GAAIC,GAAQ,EACNb,EAAS,SAAW,GACtB,cAAcM,CAAiB,EAC/BQ,EAAU,CAAC,MACR,CAEHd,EAAS,SAAW,GACpB,MAAMe,EAAOD,EAAUD,CAAI,EAEjCG,EAAgBD,CAAI,CACjB,CACJ,EAAE,GAAI,CACT,CAEA,SAASD,EAAUG,EAAI,CAQrB,MAAMC,EAAOC,EAAI,KAAK,MAAMF,EAAK,KAAG,CAAC,EAE/BG,EAAQD,EAAI,KAAK,MAAOF,EAAK,MAAO,IAAI,CAAC,EAEzCI,EAAUF,EAAI,KAAK,MAAQF,EAAK,MAAO,KAAQ,GAAM,CAAC,EAEtDK,EAAUH,EAAI,KAAK,MAASF,EAAK,MAAO,KAAQ,IAAU,GAAM,CAAC,EAEvE,MAAO,CAAE,KAAAC,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,CACxC,CAEA,QAAQ,IAAIR,EAAU,GAAI,CAAC,EAC3B,QAAQ,IAAIA,EAAU,IAAM,CAAC,EAC7B,QAAQ,IAAIA,EAAU,MAAQ,CAAC,EAE/B,SAASK,EAAII,EAAO,CAClB,OAAO,OAAOA,CAAK,EAAE,SAAS,EAAG,GAAG,CACtC,CAEA,SAASP,EAAgB,CAAE,KAAAE,EAAM,MAAAE,EAAO,QAAAC,EAAS,QAAAC,CAAO,EAAI,CAC5DrB,EAAS,YAAciB,EACrBhB,EAAU,YAAYkB,EACtBjB,EAAY,YAAYkB,EACxBjB,EAAY,YAAYkB,CAC1B,CAEAtB,EAAS,iBAAiB,QAAS,IAAM,CACjCK,GACAK,GAER,CAAC"}